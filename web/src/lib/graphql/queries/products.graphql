query GetProducts($first: Int = 10, $after: String) {
  products(first: $first, after: $after) {
    pageInfo {
      hasNextPage
      hasPreviousPage
      endCursor
      startCursor
    }
    nodes {
      id
      databaseId
      name
      slug
      description
      shortDescription
        ... on Product {
          partNumber
          productCategories {
            nodes {
              id
              name
              slug
            }
          }
        }
      ... on SimpleProduct {
        price
        regularPrice
        salePrice
        onSale
        stockStatus
        stockQuantity
      }
      ... on VariableProduct {
        price
        regularPrice
        salePrice
        onSale
        stockStatus
      }
      image {
        id
        sourceUrl
        altText
        mediaDetails {
          height
          width
        }
      }
    }
  }
}

query GetProductBySlug($slug: ID!) {
  product(id: $slug, idType: SLUG) {
    id
    databaseId
    name
    slug
    description
    shortDescription
    partNumber
    productDocuments {
      heading
      files {
        id
        url
        title
        filename
      }
    }
    productVideos {
      heading
      videos {
        url
      }
    }
    ... on SimpleProduct {
      price
      regularPrice
      salePrice
      onSale
      stockStatus
      stockQuantity
      sku
    }
    ... on VariableProduct {
      price
      regularPrice
      salePrice
      onSale
      stockStatus
      variations {
        nodes {
          id
          databaseId
          name
          price
          regularPrice
          stockStatus
          partNumber
          sku
        }
      }
    }
    image {
      id
      sourceUrl
      altText
      mediaDetails {
        height
        width
      }
    }
    galleryImages {
      nodes {
        id
        sourceUrl
        altText
        mediaDetails {
          height
          width
        }
      }
    }
    productCategories {
      nodes {
        id
        name
        slug
      }
    }
    productTags {
      nodes {
        id
        name
        slug
      }
    }
    related(first: 6) {
      nodes {
        id
        name
        slug
          ... on Product {
            partNumber
          }
          image {
            sourceUrl
            altText
          }
      }
    }
    ... on Product {
      multiplierGroups {
        nodes {
          id
          name
          slug
        }
      }
    }
  }
}

# Lightweight query for initial page load (above-the-fold content only)
# Reduces payload by ~70% for faster Time to First Byte
query GetProductBySlugLight($slug: ID!) {
  product(id: $slug, idType: SLUG) {
    __typename
    id
    databaseId
    name
    slug
    description
    shortDescription
    partNumber
    ... on SimpleProduct {
      price
      regularPrice
      salePrice
      onSale
      stockStatus
      sku
    }
    ... on VariableProduct {
      price
      regularPrice
      salePrice
      onSale
      stockStatus
    }
    image {
      sourceUrl
      altText
      mediaDetails {
        height
        width
      }
    }
    productCategories {
      nodes {
        id
        name
        slug
      }
    }
    productDocuments {
      heading
      files {
        id
        url
        title
        filename
      }
    }
    productVideos {
      heading
      videos {
        url
      }
    }
  }
}

# Deferred query for product details (description, gallery, tags)
# Loaded after hero section renders
query GetProductDetailsDeferred($id: ID!) {
  product(id: $id, idType: DATABASE_ID) {
    id
    description
    productDocuments {
      heading
      files {
        id
        url
        title
        filename
      }
    }
    productVideos {
      heading
      videos {
        url
      }
    }
    galleryImages {
      nodes {
        id
        sourceUrl
        altText
        mediaDetails {
          height
          width
        }
      }
    }
    productTags {
      nodes {
        id
        name
        slug
      }
    }
    ... on Product {
      multiplierGroups {
        nodes {
          id
          name
          slug
        }
      }
    }
  }
}

# Separate query for product variations
# Only load when needed for VariableProduct configurator
query GetProductVariations($id: ID!) {
  product(id: $id, idType: DATABASE_ID) {
    __typename
    ... on VariableProduct {
      attributes {
        nodes {
          id
          name
          label
          options
          variation
        }
      }
      variations {
        nodes {
          id
          databaseId
          name
          price
          regularPrice
          stockStatus
          partNumber
          sku
          attributes {
            nodes {
              name
              label
              value
            }
          }
        }
      }
    }
  }
}

# Separate query for related products
# Loaded in separate Suspense boundary at bottom of page
query GetProductRelated($id: ID!) {
  product(id: $id, idType: DATABASE_ID) {
    related(first: 6) {
      nodes {
        id
        name
        slug
        ... on Product {
          partNumber
        }
        image {
          sourceUrl
          altText
        }
      }
    }
  }
}

query GetProductCategories($first: Int = 100) {
  productCategories(first: $first) {
    nodes {
      id
      databaseId
      name
      slug
      count
      description
      image {
        id
        sourceUrl
        altText
      }
    }
  }
}

query GetProductCategory($slug: ID!) {
  productCategory(id: $slug, idType: SLUG) {
    id
    databaseId
    name
    slug
    count
    description
    image {
      id
      sourceUrl
      altText
    }
  }
}

query GetProductsByCategory($categorySlug: String!, $first: Int = 10, $after: String) {
  products(where: { category: $categorySlug }, first: $first, after: $after) {
    pageInfo {
      hasNextPage
      hasPreviousPage
      endCursor
      startCursor
    }
    nodes {
      id
      databaseId
      name
      slug
      shortDescription
      ... on Product {
        partNumber
        productCategories {
          nodes {
            id
            name
            slug
          }
        }
      }
      ... on SimpleProduct {
        price
        regularPrice
        salePrice
        onSale
        stockStatus
        stockQuantity
        sku
      }
      ... on VariableProduct {
        price
        regularPrice
        salePrice
        onSale
        stockStatus
      }
      image {
        id
        sourceUrl
        altText
        mediaDetails {
          height
          width
        }
      }
    }
  }
}

# Modern Product Category Queries with Hierarchy and Filters

query GetProductCategoryWithChildren($slug: ID!) {
  productCategory(id: $slug, idType: SLUG) {
    id
    databaseId
    name
    slug
    count
    description
    image {
      id
      sourceUrl
      altText
    }
    parent {
      node {
        id
        databaseId
        name
        slug
      }
    }
    children {
      nodes {
        id
        databaseId
        name
        slug
        count
        description
        image {
          id
          sourceUrl
          altText
        }
      }
    }
    ancestors {
      nodes {
        id
        databaseId
        name
        slug
      }
    }
  }
}

query GetProductAttributes {
  paApplications: allPaApplication(first: 100) {
    nodes {
      id
      databaseId
      name
      slug
      count
    }
  }
  paRoomEnclosureStyles: allPaRoomEnclosureStyle(first: 100) {
    nodes {
      id
      databaseId
      name
      slug
      count
    }
  }
  paTemperatureSensorOutputs: allPaTemperatureSensorOutput(first: 100) {
    nodes {
      id
      databaseId
      name
      slug
      count
    }
  }
  paDisplays: allPaDisplay(first: 100) {
    nodes {
      id
      databaseId
      name
      slug
      count
    }
  }
  paHumidityApplications: allPaHumidityApplication(first: 100) {
    nodes {
      id
      databaseId
      name
      slug
      count
    }
  }
  paHumiditySensorOutputs: allPaHumiditySensorOutput(first: 100) {
    nodes {
      id
      databaseId
      name
      slug
      count
    }
  }
  paPressureApplications: allPaPressureApplication(first: 100) {
    nodes {
      id
      databaseId
      name
      slug
      count
    }
  }
  paAirQualitySensorTypes: allPaAirQualitySensorType(first: 100) {
    nodes {
      id
      databaseId
      name
      slug
      count
    }
  }
}

query GetProductsWithFilters(
  $categorySlug: String!
  $first: Int = 24
  $after: String
) {
  products(
    where: { 
      category: $categorySlug
    }
    first: $first
    after: $after
  ) {
    pageInfo {
      hasNextPage
      hasPreviousPage
      endCursor
      startCursor
    }
    nodes {
      id
      databaseId
      name
      slug
      type
      ... on SimpleProduct {
        id
        name
        price
        regularPrice
        salePrice
        stockStatus
        stockQuantity
        onSale
        sku
        shortDescription
        featuredImage {
          node {
            id
            sourceUrl
            altText
            mediaDetails {
              height
              width
            }
          }
        }
        image {
          id
          sourceUrl
          altText
          mediaDetails {
            height
            width
          }
        }
        productCategories {
          nodes {
            id
            name
            slug
          }
        }
        allPaApplication {
          nodes {
            id
            name
            slug
          }
        }
        allPaRoomEnclosureStyle {
          nodes {
            id
            name
            slug
          }
        }
        allPaTemperatureSensorOutput {
          nodes {
            id
            name
            slug
          }
        }
        allPaDisplay {
          nodes {
            id
            name
            slug
          }
        }
      }
      ... on VariableProduct {
        id
        name
        price
        regularPrice
        salePrice
        stockStatus
        onSale
        sku
        shortDescription
        featuredImage {
          node {
            id
            sourceUrl
            altText
            mediaDetails {
              height
              width
            }
          }
        }
        image {
          id
          sourceUrl
          altText
          mediaDetails {
            height
            width
          }
        }
        productCategories {
          nodes {
            id
            name
            slug
          }
        }
        allPaApplication {
          nodes {
            id
            name
            slug
          }
        }
        allPaRoomEnclosureStyle {
          nodes {
            id
            name
            slug
          }
        }
        allPaTemperatureSensorOutput {
          nodes {
            id
            name
            slug
          }
        }
        allPaDisplay {
          nodes {
            id
            name
            slug
          }
        }
      }
    }
  }
}
